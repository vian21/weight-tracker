<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Import data</title>

    <script src="main.js"></script>

    <style>
      body {
        width: 100%;
        margin: 0;
      }
      textarea {
        width: 90%;
        padding: 10px;
      }
      button {
        margin-top: 10px;
        border-radius: 40px;
        border: 0;
        font-size: 16px;
        padding: 12px;
        width: 80%;
        background-color: #3dc7f5;
        color: white;
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <center>
      <textarea id="data" cols="30" rows="10"></textarea>

      <button onclick="save(event)">Import</button>
    </center>
  </body>

  <script>
    let data;
    window.onload = () => {
      data = getData();
    };

    function save(event) {
      event.preventDefault();

      const newData = document.querySelector("#data").value;

      try {
        const parsedData = JSON.parse(newData);
        data.push(...parsedData);

        updateStorage(data);

        document.querySelector("#data").value = "";

        location.href = "index.html";
        alert("Data imported");
      } catch {
        alert("Invalid data");
      }
    }
  </script>
</html>
